<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Heart Test</title>

  <!-- Inline CSS: chắc chắn chạy -->
  <style>
    html, body { margin:0; padding:0; background:#000; overflow:hidden; height:100%; }
    canvas { display:block; }
  </style>

  <!-- (Optional) vẫn link file ngoài để bạn dùng về sau -->
  <link rel="stylesheet" href="style.css?v=999">
</head>
<body>

<canvas id="c"></canvas>

<!-- Inline JS: chắc chắn chạy -->
<script>
(() => {
  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");

  function resize(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resize);
  resize();

  function isHeart(x,y){
    const a = x*x + y*y - 1;
    return (a*a*a - x*x*y*y*y) <= 0;
  }

  // tạo điểm tim
  const particles = [];
  const COUNT = 9000;

  for(let i=0;i<COUNT;i++){
    let x,y;
    do{
      x = (Math.random()*2 - 1.0) * 1.4;
      y = (Math.random()*2 - 1.2) * 1.4;
    } while(!isHeart(x,y));

    particles.push({
      x, y,
      r: Math.random()*1.5 + 0.4,
      phase: Math.random()*Math.PI*2
    });
  }

  function draw(t){
    const w = canvas.width, h = canvas.height;
    ctx.clearRect(0,0,w,h);

    // DEBUG chữ này mà không thấy => JS không chạy (nhưng file này inline nên chắc chắn phải thấy)
    ctx.fillStyle = "rgba(255,255,255,0.75)";
    ctx.font = "16px system-ui, Arial";
    ctx.fillText("LOADED ✅ (Nếu thấy dòng này thì JS OK)", 18, 30);

    const cx = w/2, cy = h/2;
    const scale = Math.min(w,h) * 0.28;

    for(const p of particles){
      const tw = (Math.sin(t*0.002 + p.phase)+1)/2;
      ctx.beginPath();
      ctx.fillStyle = `rgba(255,255,255,${0.35 + tw*0.65})`;
      ctx.arc(cx + p.x*scale, cy - p.y*scale, p.r, 0, Math.PI*2);
      ctx.fill();
    }

    requestAnimationFrame(draw);
  }
  requestAnimationFrame(draw);
})();
</script>

<!-- (Optional) vẫn load file ngoài -->
<script src="script.js?v=999"></script>

</body>
</html>

